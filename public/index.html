<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Authentication</title>
</head>

<body>

    <!-- Registration Form -->
    <h2>Registration Form</h2>
    <form id="registerForm" enctype="multipart/form-data">
        <label for="email">Email:</label><br>
        <input type="email" id="registerEmail" name="email" required><br>
        <label for="username">Username:</label><br>
        <input type="text" id="registerUsername" name="username" required><br>
        <label for="password">Password:</label><br>
        <input type="password" id="registerPassword" name="password" required><br><br>
        <label for="password">Confirm Password:</label><br>
        <input type="password" id="confirmPassword" name="confirmPassword" required><br><br>
        <button type="submit">Register</button>
    </form>

    <!-- Login Form -->
    <h2>Login Form</h2>
    <form id="loginForm" action="/auth/login/local" method="GET">
        <label for="email">Email or Username:</label><br>
        <input type="text" id="loginUsername" name="username" required><br>
        <label for="loginPassword">Password:</label><br>
        <input type="password" id="loginPassword" name="password" required><br><br>
        <button type="submit">Sign in</button>
    </form>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const registerForm = document.getElementById("registerForm");
        registerForm.addEventListener("submit", async (e) => {
            e.preventDefault();
            axios.post("/auth/register/local", {
                email: document.getElementById("registerEmail").value,
                username: document.getElementById("registerUsername").value,
                password: document.getElementById("registerPassword").value,
                confirmPassword: document.getElementById("confirmPassword").value,
            }).then(response => {
                const data = response.data
                if (data.success) {
                    alert('Registration successful: ' + data.message);
                } else {
                    alert('Registration failed: ' + data.message);
                }
            }).catch(error => {
                console.log(error);
            })
        })

        // const loginForm = document.getElementById("loginForm");
        // loginForm.addEventListener("submit", async (e) => {
        //     e.preventDefault();
        //     axios.get("/auth/login/local", {
        //         username: document.getElementById("loginUsername").value,
        //         password: document.getElementById("loginPassword").value,
        //     }).then(response => {
        //         console.log({
        //             username: document.getElementById("loginUsername").value,
        //             password: document.getElementById("loginPassword").value,
        //         })
        //         const data = response.data
        //         console.log(response)
        //         if (data.success) {
        //             alert('Login successful: ' + data.message);
        //         } else {
        //             alert('Login failed: ' + data.error.message);
        //         }
        //     }).catch(error => {
        //         console.log(error);
        //     })
        // })
    </script>
</body>

</html>